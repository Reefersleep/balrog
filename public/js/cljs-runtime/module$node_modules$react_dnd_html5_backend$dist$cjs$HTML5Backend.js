shadow$provide.module$node_modules$react_dnd_html5_backend$dist$cjs$HTML5Backend=function(global,require,module,exports){function _typeof(obj$jscomp$0){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _getRequireWildcardCache(){if("function"!==typeof WeakMap)return null;var cache=new WeakMap;
_getRequireWildcardCache=function(){return cache};return cache}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),
!0).forEach(function(key){var value=source[key];key in target?Object.defineProperty(target,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=
props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _EnterLeaveCounter=function(obj){return obj&&
obj.__esModule?obj:{default:obj}}(require("module$node_modules$react_dnd_html5_backend$dist$cjs$EnterLeaveCounter")),_BrowserDetector=require("module$node_modules$react_dnd_html5_backend$dist$cjs$BrowserDetector"),_OffsetUtils=require("module$node_modules$react_dnd_html5_backend$dist$cjs$OffsetUtils"),_NativeDragSources=require("module$node_modules$react_dnd_html5_backend$dist$cjs$NativeDragSources$index"),NativeTypes=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&
"function"!==typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;cache&&cache.set(obj,newObj);return newObj}(require("module$node_modules$react_dnd_html5_backend$dist$cjs$NativeTypes")),
_OptionsReader=require("module$node_modules$react_dnd_html5_backend$dist$cjs$OptionsReader");global=function(){function HTML5Backend(manager,globalContext){var _this=this;if(!(this instanceof HTML5Backend))throw new TypeError("Cannot call a class as a function");this.sourcePreviewNodes=new Map;this.sourcePreviewNodeOptions=new Map;this.sourceNodes=new Map;this.sourceNodeOptions=new Map;this.dragStartSourceIds=null;this.dropTargetIds=[];this.dragEnterTargetIds=[];this.currentDragSourceNode=this.currentNativeHandle=
this.currentNativeSource=null;this.altKeyPressed=!1;this.dragOverTargetIds=this.asyncEndDragFrameId=this.mouseMoveTimeoutTimer=null;this.getSourceClientOffset=function(sourceId){return(0,_OffsetUtils.getNodeClientOffset)(_this.sourceNodes.get(sourceId))};this.endDragNativeItem=function(){_this.isDraggingNativeItem()&&(_this.actions.endDrag(),_this.registry.removeSource(_this.currentNativeHandle),_this.currentNativeHandle=null,_this.currentNativeSource=null)};this.isNodeInDocument=function(node){return _this.document&&
_this.document.body&&document.body.contains(node)};this.endDragIfSourceWasRemovedFromDOM=function(){_this.isNodeInDocument(_this.currentDragSourceNode)||_this.clearCurrentDragSourceNode()&&_this.actions.endDrag()};this.handleTopDragStartCapture=function(){_this.clearCurrentDragSourceNode();_this.dragStartSourceIds=[]};this.handleTopDragStart=function(e){if(!e.defaultPrevented){var dragStartSourceIds=_this.dragStartSourceIds;_this.dragStartSourceIds=null;var clientOffset=(0,_OffsetUtils.getEventClientOffset)(e);
_this.monitor.isDragging()&&_this.actions.endDrag();_this.actions.beginDrag(dragStartSourceIds||[],{publishSource:!1,getSourceClientOffset:_this.getSourceClientOffset,clientOffset:clientOffset});dragStartSourceIds=e.dataTransfer;var nativeType=(0,_NativeDragSources.matchNativeItemType)(dragStartSourceIds);if(_this.monitor.isDragging()){if(dragStartSourceIds&&"function"===typeof dragStartSourceIds.setDragImage){var sourceId=_this.monitor.getSourceId();nativeType=_this.sourceNodes.get(sourceId);if(sourceId=
_this.sourcePreviewNodes.get(sourceId)||nativeType){var _this$getCurrentSourc=_this.getCurrentSourcePreviewNodeOptions(),anchorPoint={anchorX:_this$getCurrentSourc.anchorX,anchorY:_this$getCurrentSourc.anchorY};_this$getCurrentSourc={offsetX:_this$getCurrentSourc.offsetX,offsetY:_this$getCurrentSourc.offsetY};clientOffset=(0,_OffsetUtils.getDragPreviewOffset)(nativeType,sourceId,clientOffset,anchorPoint,_this$getCurrentSourc);dragStartSourceIds.setDragImage(sourceId,clientOffset.x,clientOffset.y)}}try{dragStartSourceIds.setData("application/json",
{})}catch(err){}_this.setCurrentDragSourceNode(e.target);_this.getCurrentSourcePreviewNodeOptions().captureDraggingState?_this.actions.publishDragSource():setTimeout(function(){return _this.actions.publishDragSource()},0)}else nativeType?_this.beginDragNativeItem(nativeType):(!dragStartSourceIds||dragStartSourceIds.types||(!e.target||e.target.hasAttribute)&&e.target.hasAttribute("draggable"))&&e.preventDefault()}};this.handleTopDragEndCapture=function(){_this.clearCurrentDragSourceNode()&&_this.actions.endDrag()};
this.handleTopDragEnterCapture=function(e){_this.dragEnterTargetIds=[];if(_this.enterLeaveCounter.enter(e.target)&&!_this.monitor.isDragging()){e=e.dataTransfer;var nativeType=(0,_NativeDragSources.matchNativeItemType)(e);nativeType&&_this.beginDragNativeItem(nativeType,e)}};this.handleTopDragEnter=function(e){var dragEnterTargetIds=_this.dragEnterTargetIds;_this.dragEnterTargetIds=[];_this.monitor.isDragging()&&(_this.altKeyPressed=e.altKey,(0,_BrowserDetector.isFirefox)()||_this.actions.hover(dragEnterTargetIds,
{clientOffset:(0,_OffsetUtils.getEventClientOffset)(e)}),dragEnterTargetIds.some(function(targetId){return _this.monitor.canDropOnTarget(targetId)})&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=_this.getCurrentDropEffect())))};this.handleTopDragOverCapture=function(){_this.dragOverTargetIds=[]};this.handleTopDragOver=function(e){var dragOverTargetIds=_this.dragOverTargetIds;_this.dragOverTargetIds=[];_this.monitor.isDragging()?(_this.altKeyPressed=e.altKey,_this.actions.hover(dragOverTargetIds||
[],{clientOffset:(0,_OffsetUtils.getEventClientOffset)(e)}),(dragOverTargetIds||[]).some(function(targetId){return _this.monitor.canDropOnTarget(targetId)})?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=_this.getCurrentDropEffect())):_this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))):(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))};this.handleTopDragLeaveCapture=function(e){_this.isDraggingNativeItem()&&
e.preventDefault();_this.enterLeaveCounter.leave(e.target)&&_this.isDraggingNativeItem()&&_this.endDragNativeItem()};this.handleTopDropCapture=function(e){_this.dropTargetIds=[];e.preventDefault();_this.isDraggingNativeItem()&&_this.currentNativeSource.loadDataTransfer(e.dataTransfer);_this.enterLeaveCounter.reset()};this.handleTopDrop=function(e){var dropTargetIds=_this.dropTargetIds;_this.dropTargetIds=[];_this.actions.hover(dropTargetIds,{clientOffset:(0,_OffsetUtils.getEventClientOffset)(e)});
_this.actions.drop({dropEffect:_this.getCurrentDropEffect()});_this.isDraggingNativeItem()?_this.endDragNativeItem():_this.endDragIfSourceWasRemovedFromDOM()};this.handleSelectStart=function(e){var target=e.target;"function"!==typeof target.dragDrop||"INPUT"===target.tagName||"SELECT"===target.tagName||"TEXTAREA"===target.tagName||target.isContentEditable||(e.preventDefault(),target.dragDrop())};this.options=new _OptionsReader.OptionsReader(globalContext);this.actions=manager.getActions();this.monitor=
manager.getMonitor();this.registry=manager.getRegistry();this.enterLeaveCounter=new _EnterLeaveCounter.default(this.isNodeInDocument)}_createClass(HTML5Backend,[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0;this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),
this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(sourceId,node,options){var _this2=this;this.sourcePreviewNodeOptions.set(sourceId,options);this.sourcePreviewNodes.set(sourceId,node);return function(){_this2.sourcePreviewNodes.delete(sourceId);_this2.sourcePreviewNodeOptions.delete(sourceId)}}},{key:"connectDragSource",value:function(sourceId,node,options){var _this3=this;this.sourceNodes.set(sourceId,
node);this.sourceNodeOptions.set(sourceId,options);var handleDragStart=function(e){return _this3.handleDragStart(e,sourceId)},handleSelectStart=function(e){return _this3.handleSelectStart(e)};node.setAttribute("draggable","true");node.addEventListener("dragstart",handleDragStart);node.addEventListener("selectstart",handleSelectStart);return function(){_this3.sourceNodes.delete(sourceId);_this3.sourceNodeOptions.delete(sourceId);node.removeEventListener("dragstart",handleDragStart);node.removeEventListener("selectstart",
handleSelectStart);node.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(targetId,node){var _this4=this,handleDragEnter=function(e){return _this4.handleDragEnter(e,targetId)},handleDragOver=function(e){return _this4.handleDragOver(e,targetId)},handleDrop=function(e){return _this4.handleDrop(e,targetId)};node.addEventListener("dragenter",handleDragEnter);node.addEventListener("dragover",handleDragOver);node.addEventListener("drop",handleDrop);return function(){node.removeEventListener("dragenter",
handleDragEnter);node.removeEventListener("dragover",handleDragOver);node.removeEventListener("drop",handleDrop)}}},{key:"addEventListeners",value:function(target){target.addEventListener&&(target.addEventListener("dragstart",this.handleTopDragStart),target.addEventListener("dragstart",this.handleTopDragStartCapture,!0),target.addEventListener("dragend",this.handleTopDragEndCapture,!0),target.addEventListener("dragenter",this.handleTopDragEnter),target.addEventListener("dragenter",this.handleTopDragEnterCapture,
!0),target.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),target.addEventListener("dragover",this.handleTopDragOver),target.addEventListener("dragover",this.handleTopDragOverCapture,!0),target.addEventListener("drop",this.handleTopDrop),target.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(target){target.removeEventListener&&(target.removeEventListener("dragstart",this.handleTopDragStart),target.removeEventListener("dragstart",
this.handleTopDragStartCapture,!0),target.removeEventListener("dragend",this.handleTopDragEndCapture,!0),target.removeEventListener("dragenter",this.handleTopDragEnter),target.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),target.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),target.removeEventListener("dragover",this.handleTopDragOver),target.removeEventListener("dragover",this.handleTopDragOverCapture,!0),target.removeEventListener("drop",this.handleTopDrop),
target.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var sourceId=this.monitor.getSourceId();sourceId=this.sourceNodeOptions.get(sourceId);return _objectSpread({dropEffect:this.altKeyPressed?"copy":"move"},sourceId||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var sourceId=this.monitor.getSourceId();
sourceId=this.sourcePreviewNodeOptions.get(sourceId);return _objectSpread({anchorX:.5,anchorY:.5,captureDraggingState:!1},sourceId||{})}},{key:"isDraggingNativeItem",value:function(){var itemType=this.monitor.getItemType();return Object.keys(NativeTypes).some(function(key){return NativeTypes[key]===itemType})}},{key:"beginDragNativeItem",value:function(type,dataTransfer){this.clearCurrentDragSourceNode();this.currentNativeSource=(0,_NativeDragSources.createNativeDragSource)(type,dataTransfer);this.currentNativeHandle=
this.registry.addSource(type,this.currentNativeSource);this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(node){var _this5=this;this.clearCurrentDragSourceNode();this.currentDragSourceNode=node;this.mouseMoveTimeoutTimer=setTimeout(function(){return _this5.window&&_this5.window.addEventListener("mousemove",_this5.endDragIfSourceWasRemovedFromDOM,!0)},1E3)}},{key:"clearCurrentDragSourceNode",value:function(){return this.currentDragSourceNode?(this.currentDragSourceNode=
null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0):!1}},{key:"handleDragStart",value:function(e,sourceId){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(sourceId))}},{key:"handleDragEnter",value:function(e,targetId){this.dragEnterTargetIds.unshift(targetId)}},{key:"handleDragOver",value:function(e,
targetId){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]);this.dragOverTargetIds.unshift(targetId)}},{key:"handleDrop",value:function(e,targetId){this.dropTargetIds.unshift(targetId)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}]);return HTML5Backend}();exports.default=global}
//# sourceMappingURL=module$node_modules$react_dnd_html5_backend$dist$cjs$HTML5Backend.js.map
